(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0465b27d"],{"484d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,inline:!0,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"进出场时间",prop:"trafficTimeStr","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.trafficTimeStr,callback:function(t){e.$set(e.searchForm,"trafficTimeStr",t)},expression:"searchForm.trafficTimeStr"}})],1),a("el-form-item",{attrs:{label:"车牌号",prop:"S_EQ_Truck_No"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.queryTruckSearch,placeholder:"请输入车牌号查询"},model:{value:e.searchForm.S_EQ_Truck_No,callback:function(t){e.$set(e.searchForm,"S_EQ_Truck_No",t)},expression:"searchForm.S_EQ_Truck_No"}})],1),a("el-form-item",{attrs:{label:"车队",prop:"tenantName"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.queryTenantSearch,placeholder:"请输入车队名称查询"},model:{value:e.searchForm.tenantName,callback:function(t){e.$set(e.searchForm,"tenantName",t)},expression:"searchForm.tenantName"}})],1),a("el-form-item",{attrs:{label:"业务类型",prop:"S_EQ_Job_Type_ID"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.S_EQ_Job_Type_ID,callback:function(t){e.$set(e.searchForm,"S_EQ_Job_Type_ID",t)},expression:"searchForm.S_EQ_Job_Type_ID"}},[a("el-option",{attrs:{value:""}},[e._v("全部")]),e._l(e.jobTypes,(function(e){return a("el-option",{key:e.jobTypeId,attrs:{label:e.jobTypeName,value:e.jobTypeId}})}))],2)],1),a("el-form-item",{attrs:{label:"道闸口",prop:"entryNo"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择道闸口查询"},model:{value:e.searchForm.entryNo,callback:function(t){e.$set(e.searchForm,"entryNo",t)},expression:"searchForm.entryNo"}},[a("el-option",{attrs:{value:""}},[e._v("全部")]),e._l(e.entrys,(function(e){return a("el-option",{key:e.entryId,attrs:{label:e.entryNo,value:e.entryNo}})}))],2)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.onSearch(1)}}},[e._v("查询")]),a("el-button",{attrs:{type:"default",icon:"el-icon-refresh"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.source.loading,expression:"source.loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.source.data,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:function(e){return e+1},align:"center"}}),a("el-table-column",{attrs:{label:"车队",prop:"tenantName","header-align":"center","min-width":"140px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.trafficJobs?a("span",e._l(t.row.trafficJobs,(function(r,n){return a("span",{key:r.jobId},[e._v(" "+e._s(r.pomsJob.tenantName)+" "),null!=r.pomsJob.tenantName&&n+1!=t.row.trafficJobs.length?a("span",[e._v(",")]):e._e()])})),0):e._e()]}}])}),a("el-table-column",{attrs:{label:"车牌号",prop:"truckNo","header-align":"center",align:"center","min-width":"100px"}}),a("el-table-column",{attrs:{label:"进场信息"}},[a("el-table-column",{attrs:{label:"时间",prop:"enterTime","header-align":"center",align:"center","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("FormatDate")(t.row.enterTime,"yy-MM-dd HH:mm")))]}}])}),a("el-table-column",{attrs:{label:"道闸号",prop:"enterEntryNo","header-align":"center",align:"center","min-width":"80px"}}),a("el-table-column",{attrs:{label:"装载状态",prop:"enterLoadStatus","header-align":"center",align:"center","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.loadStatusList,(function(r){return a("span",{key:r.value},[t.row.enterLoadStatus==r.value?a("span",[e._v(e._s(r.name))]):e._e()])}))}}])}),a("el-table-column",{attrs:{label:"磅数",prop:"enterWeight","header-align":"center",align:"center","min-width":"100px"}}),a("el-table-column",{attrs:{label:"装载箱数",prop:"enterContainerCount","header-align":"center",align:"center","min-width":"90px"}})],1),a("el-table-column",{attrs:{label:"出场信息"}},[a("el-table-column",{attrs:{label:"时间",prop:"leaveTime","header-align":"center",align:"center","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("FormatDate")(t.row.leaveTime,"yy-MM-dd HH:mm")))]}}])}),a("el-table-column",{attrs:{label:"道闸号",prop:"leaveEntryNo","header-align":"center",align:"center","min-width":"80px"}}),a("el-table-column",{attrs:{label:"装载状态",prop:"leaveLoadStatus","header-align":"center",align:"center","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.loadStatusList,(function(r){return a("span",{key:r.value},[t.row.leaveLoadStatus==r.value?a("span",[e._v(e._s(r.name))]):e._e()])}))}}])}),a("el-table-column",{attrs:{label:"磅数",prop:"leaveWeight","header-align":"center",align:"center","min-width":"100px"}}),a("el-table-column",{attrs:{label:"装载箱数",prop:"leaveContainerCount","header-align":"center",align:"center","min-width":"90px"}})],1),a("el-table-column",{attrs:{label:"状态",prop:"status","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v("待进场")]):2==t.row.status?a("span",[e._v("待出场")]):3==t.row.status?a("span",[e._v("已出场")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"放行状态",prop:"releaseStatus","header-align":"center",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{on:{click:function(a){return e.rowEdit(t)}}},e._l(e.releaseStatusList,(function(r){return a("span",{key:r.value},[(null==t.row.releaseStatus?0:t.row.releaseStatus)==r.value?a("span",[e._v(e._s(r.name))]):e._e()])})),0)]}}])})],1),a("pager",{attrs:{source:e.source},on:{pagerChange:e.onSearch}}),e.formView.show?a("view-form",{attrs:{model:e.formView}}):e._e()],1)},n=[],o=(a("af82"),a("9a14"),a("b90e")),s=a("872c"),l=a("a20d"),i={name:"GateTraffic",components:{pager:o["a"],viewForm:l["a"]},mixins:[s["a"]],data:function(){return{searchForm:{trafficTimeStr:[],S_EQ_Truck_No:"",tenantName:"",S_EQ_Job_Type_ID:null,entryNo:""},source:this.$tableSource("gate/gatetraffic/list","data"),trafficDirs:[],jobTypes:[],loadStatusList:[],releaseStatusList:[],entrys:[],formView:{show:!1}}},created:function(){this.onSearch(1),this.getJobTypes(),this.getTrafficDirs(),this.getLoadStatusList(),this.getReleaseStatusList(),this.getEntrys()},methods:{queryTruckSearch:function(e,t){this.$api("gate/lgtruck/findAll",{S_LIKE_a__Truck_No:e}).then((function(e){if(0==e.code){var a=[];e.data.forEach((function(e){a.push({value:e.truckNo})})),t(a)}}))},queryTenantSearch:function(e,t){this.getTenants({searchName:e}).then((function(e){if(0==e.code){var a=[];e.data.forEach((function(e){a.push({value:e.tenantName})})),t(a)}}))},onSearch:function(e){var t=Object.assign({},this.searchForm);null!=t.trafficTimeStr&&t.trafficTimeStr.length>0&&(t.S_GE_Traffic_Time=t.trafficTimeStr[0],t.S_LE_Traffic_Time=t.trafficTimeStr[1]),this.source.setParams(t).setPageIndex(e).load()},resetForm:function(e){this.$refs[e].resetFields(),this.onSearch(1)},rowEdit:function(e){this.formView={show:!0,trafficId:e.row.trafficId}}}},c=i,u=a("e90a"),f=Object(u["a"])(c,r,n,!1,null,null,null);t["default"]=f.exports},"4e54":function(e,t,a){},"872c":function(e,t,a){"use strict";a("3a20"),a("7267");var r=a("c451"),n=(a("6bf2"),a("5013"),{});t["a"]={data:function(){return{users:[],tenants:[],truckTypes:[],jobTypes:[],planStatus:[],aptStatus:[],ctnsizes:[],dgTypeList:[],zoneList:[],trafficDirs:[],loadStatusList:[],exTypes:[],entrys:[],releaseStatusList:[],trucks:[]}},methods:{deepMerge:function(e,t){var a;for(a in t)e[a]=e[a]&&"[object Object]"===e[a].toString()?this.deepMerge(e[a],t[a]):e[a]=t[a];return e},getUsers:function(e){var t=this;return new Promise((function(a,n){t.$api("/user/list",Object(r["a"])({},e)).then((function(e){t.users=e.users.list,a(e)})).catch((function(){n("api[getUsers]error")}))}))},getTenants:function(e){var t=this;return new Promise((function(a,r){var n=Object.assign({},e);t.$api("/gate/pomstenantcode/findAll",n).then((function(e){t.tenants=e.data,a(e)})).catch((function(){r("api[getTenants]error")}))}))},handleUserRemote:function(e){var t={realName:e};this.getUsers(t)},handleTenantRemote:function(e){var t={searchName:e};this.getTenants(t)},rowClassName:function(e){var t=e.row;e.rowIndex;return-1===t.passedFlag?"no-passed":1===t.passedFlag?"is-passed":""},getTruckTypes:function(){var e=this;return new Promise((function(t,a){e.$api("gate/lgtrucktype/findList",{}).then((function(a){e.truckTypes=a.data,t(a)})).catch((function(){a("api[getTruckTypes]error")}))}))},getJobTypes:function(){var e=this;return new Promise((function(t,a){e.$api("gate/pomsjobtype/findList",{}).then((function(a){e.jobTypes=a.data,t(a)})).catch((function(){a("api[getJobTypes]error")}))}))},getPlanStatus:function(){var e=this;return new Promise((function(t,a){e.$api("gate/pomsplan/status/list",{}).then((function(a){e.planStatus=a.data,t(a)})).catch((function(){a("api[getPlanStatus]error")}))}))},getAptStatus:function(){var e=this;return new Promise((function(t,a){e.$api("gate/pomsapt/status/list",{}).then((function(a){e.aptStatus=a.data,t(a)})).catch((function(){a("api[getJobTypes]error")}))}))},getCtnsizes:function(){var e=this;return new Promise((function(t,a){e.$api("gate/ctnsize/findAll",{}).then((function(a){e.ctnsizes=a.data,t(a)})).catch((function(){a("api[getCtnsizes]error")}))}))},getDgTreeList:function(){var e=this;return new Promise((function(t,a){e.$api("gate/lgdangertype/findTreeList",{}).then((function(a){e.dgTypeList=a.data,t(a)})).catch((function(){a("api[getDgTreeList]error")}))}))},getZoneTreeList:function(){var e=this;return new Promise((function(t,a){e.$api("gate/gbzone/findTreeList",{}).then((function(a){e.zoneList=a.data,t(a)})).catch((function(){a("api[getZoneTreeList]error")}))}))},getTrafficDirs:function(){var e=this;return new Promise((function(t,a){e.$api("gate/gatetraffic/trafficdir/findList",{}).then((function(a){e.trafficDirs=a.data,t(a)})).catch((function(){a("api[getTrafficDirs]error")}))}))},getLoadStatusList:function(){var e=this;return new Promise((function(t,a){e.$api("gate/gatetraffic/loadstatus/findList",{}).then((function(a){e.loadStatusList=a.data,t(a)})).catch((function(){a("api[getLoadStatusList]error")}))}))},getExTypes:function(){var e=this;return new Promise((function(t,a){e.$api("gate/gateextype/findAll",{}).then((function(a){e.exTypes=a.data,t(a)})).catch((function(){a("api[getExTypes]error")}))}))},getEntrys:function(){var e=this;return new Promise((function(t,a){e.$api("gate/gateentry/findAll",{}).then((function(a){e.entrys=a.data,t(a)})).catch((function(){a("api[getEntrys]error")}))}))},getReleaseStatusList:function(){var e=this;return new Promise((function(t,a){e.$api("gate/gatetraffic/releasestatus/findList",{}).then((function(a){e.releaseStatusList=a.data,t(a)})).catch((function(){a("api[getReleaseStatusList]error")}))}))},getTenantTrucks:function(e){var t=this;return new Promise((function(a,r){var n=Object.assign({},e);t.$api("/gate/pomstenanttruck/findAll",n).then((function(e){t.trucks=e.data,a(e)})).catch((function(){r("api[getTenantTrucks]error")}))}))}},filters:Object(r["a"])({},n)}},9571:function(e,t,a){"use strict";var r=a("4e54"),n=a.n(r);n.a},a20d:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"详情",visible:e.model.show,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.model,"show",t)}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{"label-width":"120px",model:e.ruleForm}},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("基本信息")]),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"车牌"}},[e._v(e._s(e.ruleForm.truckNo))])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态"}},[1==e.ruleForm.status?a("span",[e._v("待进场")]):2==e.ruleForm.status?a("span",[e._v("待出场")]):3==e.ruleForm.status?a("span",[e._v("已出场")]):e._e()])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"放行状态"}},e._l(e.releaseStatusList,(function(t){return a("span",{key:t.value},[(null==e.ruleForm.releaseStatus?0:e.ruleForm.releaseStatus)==t.value?a("span",[e._v(e._s(t.name))]):e._e()])})),0)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进场时间"}},[e._v(e._s(e.ruleForm.enterTime))])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进场道闸口"}},[e._v(e._s(e.ruleForm.enterEntryNo))])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进场装载状态"}},e._l(e.loadStatusList,(function(t){return a("span",{key:t.value},[e.ruleForm.enterLoadStatus==t.value?a("span",[e._v(e._s(t.name))]):e._e()])})),0)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进场磅数"}},[e._v(e._s(e.ruleForm.enterWeight))])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进场装载箱数"}},[e._v(e._s(e.ruleForm.enterContainerCount))])],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出场时间"}},[e._v(e._s(e.ruleForm.leaveTime))])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出场道闸口"}},[e._v(e._s(e.ruleForm.leaveEntryNo))])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出场装载状态"}},e._l(e.loadStatusList,(function(t){return a("span",{key:t.value},[e.ruleForm.leaveLoadStatus==t.value?a("span",[e._v(e._s(t.name))]):e._e()])})),0)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出场磅数"}},[e._v(e._s(e.ruleForm.leaveWeight))])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出场装载箱数"}},[e._v(e._s(e.ruleForm.leaveContainerCount))])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{ref:"jobTable",staticStyle:{width:"100%"},attrs:{data:e.ruleForm.trafficCtnrs,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:function(e){return e+1},align:"center"}}),a("el-table-column",{attrs:{label:"箱号",prop:"ctnrNo","header-align":"center","min-width":"100px"}}),a("el-table-column",{attrs:{label:"进出",prop:"trafficDirection",width:"80","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.trafficDirection?a("span",[e._v("进场")]):2==t.row.trafficDirection?a("span",[e._v("出场")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"时间",prop:"trafficTime","header-align":"center",align:"center","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("FormatDate")(t.row.trafficTime,"yy-MM-dd HH:mm")))]}}])}),a("el-table-column",{attrs:{label:"计划号",prop:"planNo","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.ruleForm.trafficJobs,(function(r){return a("span",{key:r.jobId},[t.row.cntrNo==r.pomsJob.ctnrNo?a("span",[e._v(e._s(r.pomsJob.planNo))]):e._e()])}))}}])}),a("el-table-column",{attrs:{label:"箱型",prop:"ctnIsoType","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"堆存位",prop:"sectionNo","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.ruleForm.trafficJobs,(function(r){return a("span",{key:r.jobId},[t.row.ctnrNo==r.pomsJob.ctnrNo?a("span",[e._v(e._s(r.pomsJob.sectionNo)+e._s(r.pomsJob.stackNo))]):e._e()])}))}}])}),a("el-table-column",{attrs:{label:"箱况",prop:"isDirty","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"业务类型",prop:"jobTypeName","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.ruleForm.trafficJobs,(function(r){return a("span",{key:r.jobId},[t.row.ctnrNo==r.pomsJob.ctnrNo?a("span",[e._v(e._s(r.pomsJob.jobTypeName))]):e._e()])}))}}])})],1)],1)],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("照片")]),a("el-row",{attrs:{gutter:20}},e._l(e.ruleForm.trafficAttachments,(function(e){return a("el-col",{key:e.attachNo,attrs:{span:8}},[a("el-image",{attrs:{src:e.attachUri}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])],1)})),1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"异常原因"}},[e._v(e._s(e.ruleForm.exCause))])],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(t){e.model.show=!1}}},[e._v("关闭")])],1)],1)},n=[],o=a("872c"),s={name:"EditForm",props:["model"],mixins:[o["a"]],data:function(){return{loading:!0,ruleForm:{trafficCtnrs:[],trafficAttachments:[],trafficJobs:[]},loadStatusList:[],releaseStatusList:[]}},created:function(){var e=this;null!=this.model.trafficId?this.$api("gate/gatetraffic/info/"+this.model.trafficId,{}).then((function(t){e.loading=!1,0==t.code&&(e.ruleForm=t.data)})):this.loading=!1,this.getLoadStatusList(),this.getReleaseStatusList()},methods:{}},l=s,i=a("e90a"),c=Object(i["a"])(l,r,n,!1,null,null,null);t["a"]=c.exports},b90e:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pager-wrap",staticStyle:{"text-align":"right"}},[a("div",{staticClass:"slot"},[e._t("default")],2),a("el-pagination",e._b({staticClass:"pager",attrs:{background:e.background,"current-page":e.source.pageIndex,"page-size":e.source.pageSize,"pager-count":5,layout:e.layout,"page-sizes":e.pageSizes,total:e.source.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[],o=a("a534"),s={name:"pager",props:{source:{required:!0,type:o["a"]},pageSizes:{type:Array,default:function(){return[10,20,50,100]}},layout:{type:String,default:"slot, prev, pager, next, total, sizes, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},methods:{handleSizeChange:function(e){this.source.setPageSize(e),this.$emit("pagerChange",1)},handleCurrentChange:function(e){this.source.setPageIndex(e),this.$emit("pagerChange",e)}}},l=s,i=(a("9571"),a("e90a")),c=Object(i["a"])(l,r,n,!1,null,null,null);t["a"]=c.exports}}]);