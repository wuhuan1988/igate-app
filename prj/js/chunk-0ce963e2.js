(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ce963e2"],{"0240":function(t,e,s){"use strict";var o=s("1fd4"),a=s.n(o);a.a},"1fd4":function(t,e,s){},"89bb":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sectionJob"},[s("el-row",[s("el-col",{staticClass:"sectionCode",attrs:{span:3}},[s("div",[t._v("待提 "+t._s(t.sectionModel.carryCount)+" 箱")]),s("div",[s("el-select",{staticStyle:{width:"80px"},on:{change:t.changeSection},model:{value:t.sectionCode,callback:function(e){t.sectionCode=e},expression:"sectionCode"}},t._l(t.sectionLs,(function(t){return s("el-option",{key:t.sectionCode,attrs:{label:t.sectionCode,value:t.sectionCode}})})),1),t._v("区 ")],1),s("div",[t._v("待还 "+t._s(t.sectionModel.returnCount)+" 箱")])]),s("el-col",{staticClass:"table-margin",attrs:{span:21}},[s("table",{staticClass:"vertical"},[s("tr",t._l(t.sectionModel.halfModels,(function(e){return s("td",{key:e.stackNo,attrs:{valign:"top"},on:{click:function(s){return t.handleChangeSegCode(e.stackNo)}}},[s("div",[s("div",{style:t.getVerticalStyle(1,e)}),s("div",{style:t.getVerticalStyle(2,e)}),s("div",{style:t.getVerticalStyle(3,e)})])])})),0)]),s("table",{staticClass:"horizontal"},[s("tr",t._l(t.sectionModel.fullModels,(function(e,o){return s("td",{key:o,class:e.halfSegment?"bg_white":"",attrs:{valign:"top",colspan:e.halfSegment?1:2},on:{click:function(s){return t.handleChangeSegCode(e.stackNo)}}},[s("div",[s("div",{style:t.getHorizontalStyle(1,e)}),s("div",{style:t.getHorizontalStyle(2,e)}),s("div",{style:t.getHorizontalStyle(3,e)})])])})),0)])])],1),s("el-row",[s("el-col",{staticClass:"job-list",attrs:{span:5}},[s("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.jobId,collapse:!1},on:{select:t.handleSelectJob}},t._l(t.sectionModel.segJobLs,(function(e){return s("el-menu-item-group",{key:e.segCode},[s("span",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"job-title"},[s("div",{staticClass:"job-left"},[t._v(t._s(t.getStack(e.segCode)))]),s("div",{staticClass:"job-right"},[t._v(" "+t._s(e.startTime)+" "),s("i",{staticClass:"el-icon-time"})])]),s("div",{staticClass:"grid-content"})]),t._l(e.carryJobLs,(function(e){return s("el-menu-item",{key:e.jobId,attrs:{index:e.jobKey}},[s("div",{staticClass:"job-content"},[s("div",{staticClass:"job-left"},[s("el-button",{class:t.getLayerClass(e.layerCode),attrs:{circle:"",icon:"el-icon-top"}}),t._v(" "+t._s(t.getJobMsg(e))+" ")],1),s("div",{staticClass:"job-right"},[t._v(t._s(e.startSencondsStr))])])])})),t._l(e.returnJobLs,(function(e){return s("el-menu-item",{key:e.jobId,attrs:{index:e.jobKey}},[s("div",{staticClass:"job-content"},[s("div",{staticClass:"job-left"},[s("el-button",{class:t.getLayerClass(e.layerCode),attrs:{icon:"el-icon-bottom",circle:""}}),t._v(" "+t._s(t.getJobMsg(e))+" ")],1),s("div",{staticClass:"job-right"},[t._v(t._s(e.startSencondsStr))])])])}))],2)})),1)],1),s("el-col",{attrs:{span:7}},[s("el-row",[s("el-col",{attrs:{span:2}},[s("div",{staticClass:"grid-content"})]),s("el-col",{attrs:{span:22}},[s("div",{staticClass:"seg-select"},[s("div",{staticClass:"el-input-number el-input-number--medium",attrs:{"data-v-0fada9a4":""}},[s("span",{staticClass:"el-input-number__decrease",attrs:{role:"button"},on:{click:t.handleStackNoDecrease}},[s("i",{staticClass:"el-icon-back"})]),s("span",{staticClass:"el-input-number__increase",attrs:{role:"button"},on:{click:t.handleStackNoIncrease}},[s("i",{staticClass:"el-icon-right"})]),s("div",{staticClass:"el-input el-input--medium"},[s("el-input",{on:{change:t.handleChangeSegCode,focus:t.handleFocusSegCode,blur:t.handleBlurSegCode},model:{value:t.stackNo,callback:function(e){t.stackNo=e},expression:"stackNo"}})],1)])])])],1),s("el-row",[s("el-col",{attrs:{span:24}},[1==t.stackModel.fullSegment?s("table",{staticClass:"segLine-table"},[t._l(t.stackModel.segLineModelLs,(function(e){return s("tr",{key:e.lineCode},[s("td",{staticClass:"title",attrs:{width:"10%"}},[t._v(t._s(e.lineCode))]),s("td",{staticClass:"ctnr",attrs:{width:"90%"}},[null!=e.seg2Model&&t.jobId==e.seg2Model.jobKey?s("div",{class:t.getLayerClass(t.sectionModel.layerCount)},[s("el-button",{class:t.getLayerClass(e.seg2Model.layerCode),attrs:{icon:10==e.seg2Model.jobTypeId||11==e.seg2Model.jobTypeId?"el-icon-top":"el-icon-bottom",circle:""}}),t._v(" "+t._s(e.seg2Model.ctnrNo)+" ")],1):t._e()])])})),s("tr",{directives:[{name:"show",rawName:"v-show",value:null!=t.stackModel.stackNo&&""!=t.stackModel.stackNo,expression:"stackModel.stackNo != null && stackModel.stackNo != ''"}]},[s("td",{staticClass:"title",attrs:{width:"10%"}}),s("td",{staticClass:"segCode",attrs:{colspan:"2"}},[t._v(t._s(t.stackModel.stackNo))])])],2):s("table",{staticClass:"segLine-table"},[t._l(t.stackModel.segLineModelLs,(function(e){return s("tr",{key:e.lineCode},[s("td",{staticClass:"title",attrs:{width:"10%"}},[t._v(t._s(e.lineCode))]),s("td",{staticClass:"ctnr",attrs:{width:"45%"}},[null!=e.seg1Model&&t.jobId==e.seg1Model.jobKey?s("div",{class:t.getLayerClass(t.sectionModel.layerCount)},[s("el-button",{class:t.getLayerClass(e.seg1Model.layerCode),attrs:{icon:10==e.seg1Model.jobTypeId||11==e.seg1Model.jobTypeId?"el-icon-top":"el-icon-bottom",circle:""}}),t._v(" "+t._s(e.seg1Model.ctnrNo)+" ")],1):t._e()]),s("td",{directives:[{name:"show",rawName:"v-show",value:null!=t.stackModel.sufSegNo&&""!=t.stackModel.sufSegNo,expression:"stackModel.sufSegNo != null && stackModel.sufSegNo != ''"}],staticClass:"ctnr",attrs:{width:"45%"}},[null!=e.seg3Model&&t.jobId==e.seg3Model.jobKey?s("div",{class:t.getLayerClass(t.sectionModel.layerCount)},[s("el-button",{class:t.getLayerClass(e.seg3Model.layerCode),attrs:{icon:10==e.seg3Model.jobTypeId||11==e.seg3Model.jobTypeId?"el-icon-top":"el-icon-bottom",circle:""}}),t._v(" "+t._s(e.seg3Model.ctnrNo)+" ")],1):t._e()])])})),s("tr",[s("td",{staticClass:"title",attrs:{width:"10%"}}),s("td",{staticClass:"segCode",attrs:{colspan:"2"}},[s("div",{staticClass:"half-statck-code"},[t._v(t._s(t.stackModel.preSegNo))]),s("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.stackModel.sufSegNo&&""!=t.stackModel.sufSegNo,expression:"stackModel.sufSegNo != null && stackModel.sufSegNo != ''"}],staticClass:"half-statck-code"},[t._v(t._s(t.stackModel.sufSegNo))]),s("div",{staticClass:"full-statck-code"},[t._v(t._s(t.stackModel.stackNo))])])])],2)])],1),s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"color-title"},[t._v("堆高图例")]),s("div",{staticClass:"color-demo layer1"},[t._v("1")]),s("div",{staticClass:"color-demo layer2"},[t._v("2")]),s("div",{staticClass:"color-demo layer3"},[t._v("3")]),s("div",{staticClass:"color-demo layer4"},[t._v("4")]),s("div",{staticClass:"color-demo layer5"},[t._v("5")])])],1)],1),s("el-col",{attrs:{span:12}})],1)],1)},a=[],i=(s("0910"),{name:"SectionJob",data:function(){return{sectionTimer:null,sectionCode:"",sectionLs:[],sectionModel:{segJobLs:[]},segJob:{},stackModel:{},stackNo:1,stackNo_temp:1,jobId:null,initJob:0}},computed:{getVerticalStyle:function(){return function(t,e){var s=38,o=0,a=0,i=0;return e.jobCount>0&&(o=s*e.timeoutrate/100,a=s*e.warningrate/100,i=s-o-a),1==t?"background-color: red; width:100%;height:"+o+"px":2==t?"background-color: yellow; width:100%;height:"+a+"px":"background-color: green; width:100%;height:"+i+"px"}},getHorizontalStyle:function(){return function(t,e){var s=18;return 1==t?"background-color: red; width:"+e.timeoutrate+"%;height:"+s+"px;float: left;":2==t?"background-color: peru; width:"+e.warningrate+"%;height:"+s+"px;float: left;":"background-color: green; width:"+e.saferate+"%;height:"+s+"px;float: left;"}},getJobMsg:function(){return function(t){return t.segCode+"  "+t.ctnrNo}},getLayerClass:function(){return function(t){return"layer"+t}},getStack:function(){return function(t){return null!=t&&t.length>2?t.substring(0,2)+"堆":""}}},mounted:function(){this.monitorJob(),this.handleSection(),this.sectionTimer=setInterval(this.monitorJob,3e4)},beforeDestroy:function(){clearInterval(this.sectionTimer)},methods:{handleSection:function(){var t=this;this.$api("gate/monitor/sections",{}).then((function(e){t.sectionLs=e.data,t.sectionLs.length>0&&(t.sectionCode=t.sectionLs[0].sectionCode)}))},monitorJob:function(){var t=this;this.$api("gate/monitor/section/"+this.sectionCode,{}).then((function(e){if(0==e.code){t.sectionModel=e.data;var s=t.sectionModel.segJobLs;if(null!=t.jobId){var o=t.initSegJob();o||(t.jobId=null)}if(0==t.initJob){if(t.initJob=1,s.length>0){var a=s[0].carryJobLs,i=s[0].returnJobLs;a.length>0?(t.jobId=a[0].jobKey,t.stackNo=a[0].stackNo,t.stackNo_temp=a[0].stackNo):i.length>0&&(t.jobId=i[0].jobKey,t.stackNo=a[0].stackNo,t.stackNo_temp=a[0].stackNo),t.segJob=s[0]}var l=t.sectionModel.fullModels;if(t.segJob.segCode)for(var n=0;n<l.length;n++){var c=l[n];c.preSegNo==t.segJob.seg1Code&&c.stackNo==t.segJob.seg2Code&&c.sufSegNo==t.segJob.seg3Code&&(t.stackModel=l[n],t.initStackNo())}else l.length>0&&(t.stackModel=l[0],t.initStackNo())}}}))},initStackNo:function(){if(1==this.stackModel.fullSegment)this.stackNo=this.stackModel.stackNo;else if(null==this.stackNo&&(this.stackNo=this.stackModel.preSegNo),this.segJob.segCode){for(var t=this.segJob.carryJobLs,e=this.segJob.returnJobLs,s=!1,o=0;o<t.length;o++)if(this.jobId==t[o].jobKey&&this.stackNo==t[o].stackNo){this.stackNo=t[o].stackNo,this.stackNo_temp=this.stackNo,s=!0;break}if(s)return;for(var a=0;a<e.length;a++)if(this.jobId==e[a].jobKey&&this.stackNo==e[a].stackNo){this.stackNo=e[a].stackNo,this.stackNo_temp=this.stackNo;break}}this.stackNo_temp=this.stackNo},changeSection:function(t){this.sectionCode=t,this.jobId=null,this.sectionModel={segJobLs:[]},this.segJob={},this.stackModel={},this.stackNo=1,this.initJob=0,this.monitorJob()},initSegJob:function(){for(var t=!1,e=this.sectionModel.segJobLs,s=0;s<e.length;s++){for(var o=e[s].carryJobLs,a=e[s].returnJobLs,i=0;i<o.length;i++)if(this.jobId==o[i].jobKey){t=!0,this.segJob=e[s];break}for(var l=0;l<a.length;l++)if(this.jobId==a[l].jobKey){t=!0,this.segJob=e[s];break}}if(this.segJob.segCode)for(var n=this.sectionModel.fullModels,c=0;c<n.length;c++){var r=n[c];r.preSegNo==this.segJob.seg1Code&&r.stackNo==this.segJob.seg2Code&&r.sufSegNo==this.segJob.seg3Code&&(this.stackModel=n[c],this.initStackNo())}return t},handleSelectJob:function(t,e){this.jobId=t,this.initSegJob()},isNumber:function(t){return"number"===typeof t&&!isNaN(t)},handleChangeSegCode:function(t){if(null!=t&&""!=t){var e=this.sectionModel.fullModels;this.isNumber(t)&&t<10&&(t="0"+t);for(var s=!1,o=0;o<e.length;o++){var a=e[o];a.preSegNo!=t&&a.stackNo!=t&&a.sufSegNo!=t||(s=!0,this.stackModel=e[o],this.stackNo=t,this.stackNo_temp=t,null!=this.segJob.segCode&&this.segJob.segCode.startsWith(t)||(this.jobId=null,this.segJob={}),this.initStackNo())}0==s&&(this.stackNo=this.stackNo_temp),this.selectJobByStackNo()}else this.stackNo=this.stackNo_temp},selectJobByStackNo:function(){for(var t=this.sectionModel.segJobLs,e=0;e<t.length;e++){for(var s=t[e].carryJobLs,o=t[e].returnJobLs,a=!1,i=0;i<s.length;i++)if(this.stackNo==s[i].stackNo){this.segJob=t[e],this.jobId=s[i].jobKey,a=!0;break}if(a)break;for(var l=0;l<o.length;l++)if(this.stackNo==o[l].stackNo){this.segJob=t[e],this.jobId=o[l].jobKey,a=!0;break}if(a)break}},handleFocusSegCode:function(){this.stackNo_temp=this.stackNo,this.stackNo=null},handleBlurSegCode:function(){null==this.stackNo&&(this.stackNo=this.stackNo_temp)},handleStackNoDecrease:function(){for(var t=this.sectionModel.fullModels,e=null,s=0;s<t.length;s++)if(this.stackModel.preSegNo==t[s].preSegNo){e=s;break}if(e>0){var o=t[e-1],a=this.stackNo-4;o.preSegNo!=a&&o.stackNo!=a&&o.sufSegNo!=a&&(a=o.preSegNo),this.handleChangeSegCode(a)}},handleStackNoIncrease:function(){for(var t=this.sectionModel.fullModels,e=null,s=0;s<t.length;s++)if(this.stackModel.preSegNo==t[s].preSegNo){e=s;break}if(e<t.length-1){var o=t[e+1],a=this.stackNo+4;o.preSegNo!=a&&o.stackNo!=a&&o.sufSegNo!=a&&(a=o.preSegNo),this.handleChangeSegCode(a)}}}}),l=i,n=(s("0240"),s("e90a")),c=Object(n["a"])(l,o,a,!1,null,"bf63bbde",null);e["default"]=c.exports}}]);