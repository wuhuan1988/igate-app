(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f70e0ba4"],{"17c1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"org"}},[r("el-row",[r("el-col",{staticStyle:{padding:"15px"},attrs:{span:3}},[r("el-tree",{attrs:{data:e.orgList,props:e.defaultProp,"node-key":"orgId","current-node-key":e.orgId,accordion:"","highlight-current":""},on:{"node-click":e.nodeChick}})],1),r("el-col",{attrs:{span:21}},[r("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,inline:!0,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"机构",prop:"orgName"}},[r("el-input",{attrs:{placeholder:"请输入机构名称查询",clearable:""},model:{value:e.searchForm.orgName,callback:function(t){e.$set(e.searchForm,"orgName",t)},expression:"searchForm.orgName"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.onSearch(1)}}},[e._v("查询")]),r("el-button",{attrs:{type:"default",icon:"el-icon-refresh"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.source.loading,expression:"source.loading"}],ref:"table",attrs:{data:e.source.data,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),r("el-table-column",{attrs:{type:"index",width:"100",label:"序号",index:function(e){return e+1},align:"center"}}),r("el-table-column",{attrs:{label:"机构编码",prop:"orgCode"}}),r("el-table-column",{attrs:{label:"机构名称",prop:"orgName"}}),r("el-table-column",{attrs:{label:"机构简称",prop:"nickName"}}),r("el-table-column",{attrs:{label:"机构类型",width:"120",prop:"orgTypeName",align:"center"}}),r("el-table-column",{attrs:{label:"启用状态",prop:"disabled",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[0==e.row.disabled?r("i",{staticClass:"el-icon-check",staticStyle:{color:"#5CB85C","font-weight":"bold"}}):r("i",{staticClass:"el-icon-close",staticStyle:{color:"#B53A37","font-weight":"bold"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",circle:"",plain:"",icon:"el-icon-edit",title:"修改"},nativeOn:{click:function(r){return r.preventDefault(),e.rowEdit(t)}}})]}}])})],1),r("pager",{attrs:{source:e.source},on:{pagerChange:e.onSearch}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleAdd()}}},[e._v("机构新增")]),r("el-button",{attrs:{type:"success",icon:"el-icon-circle-check"},on:{click:function(t){return e.changeStatus(0)}}},[e._v("启用")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-circle-close"},on:{click:function(t){return e.changeStatus(1)}}},[e._v("禁用")])],1),e.org.show?r("edit",{attrs:{model:e.org},on:{close:e.onSearch}}):e._e()],1)],1)],1)},o=[],n=(r("1a8c"),r("b90e")),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"修改机构",visible:e.model.show,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.model,"show",t)}}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",staticClass:"edit-form",attrs:{"label-width":"100px",model:e.ruleForm,rules:e.rules}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"机构编码",prop:"orgCode"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"机构编码"},model:{value:e.ruleForm.orgCode,callback:function(t){e.$set(e.ruleForm,"orgCode",t)},expression:"ruleForm.orgCode"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"机构名称",prop:"orgName"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"机构名称"},model:{value:e.ruleForm.orgName,callback:function(t){e.$set(e.ruleForm,"orgName",t)},expression:"ruleForm.orgName"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"机构简称",prop:"nickName"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"机构简称"},model:{value:e.ruleForm.nickName,callback:function(t){e.$set(e.ruleForm,"nickName",t)},expression:"ruleForm.nickName"}})],1)],1)],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{icon:"el-icon-check",type:"primary"},on:{click:function(t){return e.handleSave()}}},[e._v("保存")]),r("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(t){e.model.show=!1}}},[e._v("关闭")])],1)],1)},i=[],c={name:"EditOrg",props:["model"],data:function(){return{loading:!0,ruleForm:{},rules:{orgCode:[{required:!0,message:"用户编码",trigger:"change"}],orgName:[{required:!0,message:"机构名称",trigger:"change"}],nickName:[{required:!0,message:"机构简称",trigger:"change"}]}}},created:function(){var e=this;null!=this.model.orgId?this.$uaa({msgType:"110202",data:this.model.orgId}).then((function(t){e.loading=!1,200==t.resultCode&&(e.ruleForm=t.data)})):this.loading=!1},methods:{handleSave:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(t){var r=e.ruleForm;r.originalOrgTpye=r.orgTypeId;var a=e.$load("保存中"),o={msgType:110203,data:r};e.$uaa(o).then((function(t){a.close(),e.model.show=!1,e.$emit("close")})).catch((function(e){a.close()}))}}))}}},s=c,u=r("e90a"),d=Object(u["a"])(s,l,i,!1,null,null,null),g=d.exports,h={name:"Org",components:{pager:n["a"],edit:g},data:function(){return{orgList:[],defaultProp:{label:"orgName",children:"childrenList",checkStrictly:!1},orgId:null,searchForm:{msgType:"110208",orgName:""},source:this.$tableSource("",""),multipleSelection:[],org:{show:!1}}},created:function(){this.onSearch(1),this.getOrg()},methods:{onSearch:function(e){var t=Object.assign({},this.searchForm);this.source.setParams(t).uaaload(e)},resetForm:function(e){this.$refs[e].resetFields(),this.onSearch(1)},handleSelectionChange:function(e){this.multipleSelection=e},getOrg:function(){var e=this,t={msgType:110204,data:{menuCode:10}};this.$uaa(t).then((function(t){if(200==t.resultCode){e.orgList=t.data;var r=[];t.data.map((function(e){var t=e;r.push(t)})),e.orgList=[{orgId:null,orgName:"全部机构",childrenList:t.data}]}})).catch((function(e){}))},nodeChick:function(e){this.searchForm.orgId=e.orgId,this.onSearch(1)},handleAdd:function(){this.org={show:!0}},rowEdit:function(e){this.org={show:!0,orgId:e.row.orgId}},changeStatus:function(e){var t=this,r="启用";1==e&&(r="禁用"),this.multipleSelection.length?this.$confirm("您确认要"+r+"所选择的记录?","提示",{type:"warning",lockScroll:!1}).then((function(){var a=t.$load(r+"中"),o=[];t.multipleSelection.map((function(e){o.push(e.orgId)}));var n={msgType:110217,data:{disabled:e,orgIds:o}};t.$uaa(n).then((function(e){a.close(),t.onSearch()})).catch((function(e){a.close()}))})).catch((function(){})):this.$error("请勾选"+r+"的记录")}}},p=h,m=(r("4972"),r("bed2"),Object(u["a"])(p,a,o,!1,null,"96ef91ce",null));t["default"]=m.exports},4972:function(e,t,r){"use strict";var a=r("62d6"),o=r.n(a);o.a},"4e54":function(e,t,r){},"62d6":function(e,t,r){},9413:function(e,t,r){},9571:function(e,t,r){"use strict";var a=r("4e54"),o=r.n(a);o.a},b90e:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pager-wrap",staticStyle:{"text-align":"right"}},[r("div",{staticClass:"slot"},[e._t("default")],2),r("el-pagination",e._b({staticClass:"pager",attrs:{background:e.background,"current-page":e.source.pageIndex,"page-size":e.source.pageSize,"pager-count":5,layout:e.layout,"page-sizes":e.pageSizes,total:e.source.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},o=[],n=r("a534"),l={name:"pager",props:{source:{required:!0,type:n["a"]},pageSizes:{type:Array,default:function(){return[10,20,50,100]}},layout:{type:String,default:"slot, prev, pager, next, total, sizes, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},methods:{handleSizeChange:function(e){this.source.setPageSize(e),this.$emit("pagerChange",1)},handleCurrentChange:function(e){this.source.setPageIndex(e),this.$emit("pagerChange",e)}}},i=l,c=(r("9571"),r("e90a")),s=Object(c["a"])(i,a,o,!1,null,null,null);t["a"]=s.exports},bed2:function(e,t,r){"use strict";var a=r("9413"),o=r.n(a);o.a}}]);